!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=37)}([function(t,e){t.exports={POST_DELIMITER:"/map/layer",POST_DISTRIBUTION:"/distribution-box/save-distribution-box",POST_SUBSCRIBER:"/subscriber-box/save-subscriber-box",POST_WIRE:"/wire/save-wire",POST_SUBSCRIBER_EXT:"/subscriber-box-ext/save-subscriber-box-ext",POST_TORPEDO:"/torpedo/save-torpedo",POST_LAYER:"/layer-group/save-layer",POST_TORPEDO_PASSANT:"/torpedo-passant",POST_DISTRIBUTION_BOX_PASSANT:"/distribution-box-passant",POST_ALERT:"/alert/save-alert",GET_LAYERS:"/map/layers",GET_CPD:"/map/cpd",GET_SUBSCRIBER:"/map/subscriber-box",GET_DISTRIBUTION:"/map/distribution-box",GET_SUBSCRIBER_EXT:"/map/subscriber-box-ext",GET_TORPEDOS:"/map/torpedo",GET_WIRES:"/map/wire",GET_NOTES:"/map/notes",GET_ALERTS:"/map/alerts",PUT_SUBSCRIBER:"/map/update-subscriber-box",PUT_SUBSCRIBER_EXT:"/map/update-subscriber-box-ext",PUT_DISTRIBUTION:"/map/update-distribution-box",PUT_LAYER:"/map/update-layer",PUT_WIRE:"/map/update-wire",PUT_CPD:"/map/update-cpd",PUT_TORPEDO:"/map/update-torpedo",PUT_NOTE:"/note/update-position",PUT_ALERT:"/alert/update-position",PUT_PATCHPORT_DESCRIPTION:"/patch-panel-slot-conector/",PUT_DISTRIBUTION_PORT:"/distribution-box-port",PUT_PATCH_PANEL_PORT:"/patch-panel-slot-conector",GET_FORM_WIRE:"/form/wire",GET_FORM_WIRE_PATTERN:"/form/wire-pattern",GET_FORM_LAYER:"/form/layer",GET_WIRE_ID:"/wire/",GET_DISTRIBUTION_BOX_ID:"/distribution-box/",GET_CONECTOR_ID:"/patch-panel-slot-conector/",GET_DSBOX_PORT_ID:"/distribution-box-port/",GET_TORPEDO_FUSION_ID:"/torpedo-fusion/",GET_TORPEDO_ID:"/torpedo/",GET_SUBSCRIBER_ID:"/subscriber-box/",GET_SUBSCRIBER_EXT_ID:"/subscriber-box-ext/",GET_CPD_ID:"/cpd/",GET_SLOT_ID:"/patch-panel-slot/",GET_NOTE_ID:"/note/",GET_ALERT_ID:"/alert/",GET_LAYER_GROUP_ID:"/layer-group/",GET_EDFA_PORT_ID:"/edfa-port/",POST_PATCH_CONECTOR:"/patch-panel-slot-conector/",POST_SUBSCRIBER_IMAGE:"/subscriber-box-image/",POST_DISTRIBUTION_IMAGE:"/distribution-box-image/",POST_TORPEDO_IMAGE:"/torpedo-image/",DELETE_TORPEDO_FUSION:"/torpedo-fusion",DELETE_WIRE_ID:"/wire/",DELETE_DISTRIBUTION_BOX_PASSANT_ID:"/distribution-box-passant/",DELETE_TORPEDO_PASSANT_ID:"/torpedo-passant/",DELETE_LAYER_ID:"/layer-group/",DELETE_TORPEDO_ID:"/torpedo/"}},function(t,e,o){const i=o(15),n=o(2),a=o(19);o(40);axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var r={post:function(t,e){return new Promise((function(o,i){a.showLoader("Actualizando datos"),axios.post(t,{data:e},{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((function(t){a.hideLoader(),o(t)})).catch((function(t){a.hideLoader(),r.printError(t.response.status),i(t.response)}))}))},get:function(t,e){return new Promise((function(o,i){e&&(t+="?"+e),a.showLoader("Obteniendo datos"),axios.get(t).then((function(t){a.hideLoader(),o(t)})).catch((function(t){a.hideLoader(),r.printError(t.response.status),i(t)}))}))},put:function(t,e){return new Promise((function(o,i){a.showLoader("Actualizando datos"),axios.put(t,{data:e}).then((function(t){a.hideLoader(),o(t)})).catch((function(t){a.hideLoader(),r.printError(t.response.status),i(t)}))}))},delete:function(t,e){return new Promise((function(o,i){a.showLoader("Eliminando de la base de datos"),axios.delete(t,{data:e}).then((function(t){a.hideLoader(),o(t)})).catch((function(t){a.hideLoader(),r.printError(t.response.status),i(t)}))}))},printError:function(t){switch(t){case i.FORBIDDEN:n.error("403: No tiene permisos para realizar esta operación.");break;case i.NOT_FOUND:n.error("404: La URL indicada no existe.");break;case i.SERVER_ERROR:n.error("500: Error del servidor.");break;case i.BAD_REQUEST:n.error("400: Los argumentos enviados son erróneos.")}}};t.exports=r},function(t,e,o){o(15);var i={success:function(t){alertify.success(t)},error:function(t){alertify.error(t)}};t.exports=i},function(t,e){var o={showModal:function(t,e,o,i){bootbox.dialog({title:t,message:e,buttons:o})},showConfirm:function(t,e,o){bootbox.confirm({title:t,message:e,buttons:{cancel:{label:'<i class="fa fa-times"></i> No'},confirm:{label:'<i class="fa fa-check"></i> Si'}},callback:o})},hideAll:function(){bootbox.hideAll()},showPromptDescription:function(t,e,o){bootbox.prompt({title:t,callback:e,value:o})}};t.exports=o},function(t,e){t.exports={IMAGE_UPLOADS:"/uploads/images/",FILE_UPLOADS:"/uploads/files/"}},function(t,e,o){const i=o(7),n=o(18),a=o(17);var r=function(){this.form=""};r.prototype={build:function(){return this.form+="</form>",this.form},addSubmitBtn:function(){return this.form+="<a href='#' class='btn btn-outline-primary' onclick='javascript:dispatch(\""+a.ELEMENT_SAVE_FORM+"\", this);'>Guardar</a>",this},addName:function(){return this.form+='<div class="form-group row">            <label for="name" class="col-sm-2 col-form-label">Nombre</label>            <div class="col-sm-10">                <input type="text" class="form-control" id="name" name="name">            </div>        </div>',this},addColor:function(){return this.form+='<div class="form-group row">            <label for="color" class="col-sm-2 col-form-label">Color</label>            <div class="col-sm-10">                <input type="color" class="form-control" id="color" name="color" value="#000000">            </div>        </div>',this},addLayers:function(t){var e=this;return this.form+='<div class="form-group row">            <label for="layer" class="col-sm-2 col-form-label">Capa</label>            <div class="col-sm-10">                <select class="custom-select" id="layer" name="layer">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this},addTypes:function(){return this.form+='<div class="form-group row">            <label for="layer" class="col-sm-2 col-form-label">Tipo</label>            <div class="col-sm-10 col-form-label">            <select class="custom-select" id="'+i.ELEMENT_TYPE+'">                <option selected>Selecciona...</option>                <option value="'+n.TORPEDO+'">Torpedo</option>                <option value="'+n.DISTRIBUTION_BOX+'">Caja de distribución</option>                <option value="'+n.SUBSCRIBER_BOX+'">Caja de abonado</option>\\n                <option value="'+n.SUBSCRIBER_BOX_EXT+'">Caja de extensión</option>            </select>            </div>        </div>',this},addLatitude:function(t){return this.form+="<input type='hidden' name='latitude' value='"+t+"'>",this},addLongitude:function(t){return this.form+="<input type='hidden' name='longitude' value='"+t+"'>",this}},t.exports=r},function(t,e,o){o(16);var i=function(t){this.mapView=t};i.prototype={getLayer:function(){throw new Error("Abstract method!")},addPopup:function(t){throw new Error("Abstract method!")},subscribeToEvents:function(t){throw new Error("Abstract method!")}},t.exports=i},function(t,e){t.exports={ELEMENT_TYPE:"element-type",FUSION_WIRE_1:"torpedo-fusion-wire-1",FUSION_WIRE_2:"torpedo-fusion-wire-2",DSBOX_CONECTOR_WIRE:"dsbox-conector-wire",DSBOX_CONECTOR:"dsbox-conector"}},function(t,e){var o={buildElement:function(t,e){throw new Error("Abstract method!")}};t.exports=o},function(t,e,o){const i=o(4),n=o(21),a=(o(22),o(17));var r,s,c,l=(s={},c={},{getInstance:function(){return r||(r={addContentClientList:function(t,e,o){if(o=o||!1,e.length){var i="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";e.forEach((function(t){i+="<ul class='list-inline p-0 m-0'>",i+="<li class='list-inline-item'><span class='customer-active-led rounded-circle' style='background-color:"+(t.active?"green":"red")+";'></span></li>",i+="<li class='list-inline-item'><b>Código: </b>"+t.code+"</li>",i+="<li class='list-inline-item'><b>Nombre: </b>"+t.name+"</li>",i+="</ul>"})),i+="</div>",s[t.id]={tab:t,html:i,active:o}}return this},addContentDescription:function(t,e,o){if(o=o||!1,e){var i="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";for(var n in i+="<ul>",e)e.hasOwnProperty(n)&&(i+="<li><b>"+n+": </b>"+e[n]+"</li>");i+="</ul>",i+="</div>",s[t.id]={tab:t,html:i,active:o}}return this},addContentCarousel:function(t,e,o){if(o=o||!1,e.length){var n="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>                    <div id='carouselExampleIndicators' class='carousel slide' data-ride='carousel'>                        <ol class='carousel-indicators'>";e.forEach((function(t,e){var o="";0===e&&(o="class='active'"),n+="<li data-target='#carouselExampleIndicators' data-slide-to='"+e+"' "+o+"></li>"})),n+="</ol>                    <div class='carousel-inner bg-dark'>",e.forEach((function(t,e){var o="";0===e&&(o="active"),n+="<div class='carousel-item text-center "+o+"'>                        <a href='"+i.IMAGE_UPLOADS+t.filePath+"' data-lightbox='"+t.filePath+"'>                            <img src='"+i.IMAGE_UPLOADS+t.filePath+"' style='max-height:150px;'>                        </a>                    </div>"})),n+="</div>                            <a class='carousel-control-prev' href='#carouselExampleIndicators' role='button' data-slide='prev'>                                <span class='carousel-control-prev-icon' aria-hidden='true'></span>                                <span class='sr-only'>Previous</span>                            </a>                            <a class='carousel-control-next' href='#carouselExampleIndicators' role='button' data-slide='next'>                                <span class='carousel-control-next-icon' aria-hidden='true'></span>                                <span class='sr-only'>Next</span>                            </a>                        </div>                    </div>",s[t.id]={tab:t,html:n,active:o}}return this},addContentImage:function(t,e,o){if(o=o||!1,e){var n="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";n+="<a href='"+i.IMAGE_UPLOADS+e+"' data-lightbox='"+e+"'>                            <img src='"+i.IMAGE_UPLOADS+e+"' style='max-height:150px;'>                        </a>",n+="</div>",s[t.id]={tab:t,html:n,active:o}}return this},addContentPdf:function(t,e,o){if(o=o||!1,e.length){var n="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";n+="<ul>",e.forEach((function(t){n+="<li><a href='"+i.FILE_UPLOADS+t.filePath+"' target='_blank'>"+t.filePath+"</a></li>"})),n+="</ul></div>",s[t.id]={tab:t,html:n,active:o}}return this},addContentFusion:function(t,e,o){if(o=o||!1,e.length){var i="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";i+="<ul class='fusions'>",e.forEach((function(t){t.fibers[0]&&t.fibers[1]&&(i+="<li>",i+="<span style='position:relative;top:-10px;'>"+t.fibers[0].tube.wire.name+" </span>",i+="<div class='fusion tube-left' style='background-color:"+t.fibers[0].tube.hexaColor+"' title='Layer "+t.fibers[0].tube.layer+"'></div>",i+="<div class='fusion fiber-left' style='background-color:"+t.fibers[0].hexaColor+"' title='Layer "+t.fibers[0].tube.layer+"'></div>",i+="<div class='fusion signal-loss'>",i+="<span>------------- </span>",i+=t.signalLoss+" dBm",i+="<span> -------------</span>",i+="</div>",i+="<div class='fusion fiber-right' style='background-color:"+t.fibers[1].hexaColor+"' title='Layer "+t.fibers[1].tube.layer+"'></div>",i+="<div class='fusion tube-right' style='background-color:"+t.fibers[1].tube.hexaColor+"' title='Layer "+t.fibers[1].tube.layer+"'></div>",i+="<span style='position:relative;top:-10px;'> "+t.fibers[1].tube.wire.name+"</span>",i+="<span class='fusion-options'><i class='far fa-trash-alt text-danger' title='Eliminar fusión' onclick='javascript:dispatch(\""+a.TORPEDO_DELETE_FUSION+'", { "fusionId": '+t.id+', "el": this });\'></i></span>',i+="</li>")})),i+="</ul></div>",s[t.id]={tab:t,html:i,active:o}}return this},addContentPassant:function(t,e,o){if(o=o||!1,e.length){var i="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";i+="<ul class='fusions'>",e.forEach((function(t){t.fibers&&t.fibers[0]&&t.fibers[1]&&(i+="<li>",i+="<span style='position:relative;top:-10px;'>"+t.fibers[0].tube.wire.name+" </span>",i+="<div class='fusion tube-left' style='background-color:"+t.fibers[0].tube.hexaColor+"' title='Layer "+t.fibers[0].tube.layer+"'></div>",i+="<div class='fusion fiber-left' style='background-color:"+t.fibers[0].hexaColor+"' title='Layer "+t.fibers[0].tube.layer+"'></div>",i+="<div class='fusion signal-loss'>",i+="<span>------------- </span>",i+="</div>",i+="<div class='fusion fiber-right' style='background-color:"+t.fibers[1].hexaColor+"' title='Layer "+t.fibers[1].tube.layer+"'></div>",i+="<div class='fusion tube-right' style='background-color:"+t.fibers[1].tube.hexaColor+"' title='Layer "+t.fibers[1].tube.layer+"'></div>",i+="<span style='position:relative;top:-10px;'> "+t.fibers[1].tube.wire.name+"</span>",i+="</li>")})),i+="</ul></div>",s[t.id]={tab:t,html:i,active:o}}return this},addContentRom:function(t,e,o){var i="<div class='tab-pane "+((o=o||!1)?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";return e.patchPanels.forEach((function(t){i+="<div class='card mt-3'>",i+="<div class='card-header'>"+t.name+"</div>",i+="<div class='card-body'>",i+="<div class='row'>",i+="<div class='col-12 mt-4'>",i+="<div class='row'>",t.patchPanelSlots.forEach((function(t){i+="<div class='col text-center'>",t.patchPanelSlotConectors.forEach((function(t){var e="";t.fiber&&(e+="bg-success"),i+="<a href='#' title='"+(t.description||"No definido")+"' class='"+e+"' style='display:block;' onclick='javascript:dispatch(\""+a.PATCH_SHOW_PATH+'", '+t.id+");return false;' oncontextmenu='javascript:dispatch(\""+a.PATCH_SHOW_PROMPT+'", '+t.id+");return false;'>"+t.number+"</a>"})),i+="<a href='#' class='mt-2' onclick='javascript:dispatch(\""+a.PATCH_CONNECT_PORTS+'", '+t.id+");return false;'><i class='fas fa-link'></i></a>",i+="</div>"})),i+="</div>",i+="</div>",i+="</div>",i+="</div>",i+="</div>"})),i+="</div>",s[t.id]={tab:t,html:i,active:o},this},addDisconnectContentRom:function(t,e,o){var i="<div class='tab-pane "+((o=o||!1)?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";return e.patchPanels.forEach((function(t){i+="<div class='card mt-3'>",i+="<div class='card-header'>"+t.name+"</div>",i+="<div class='card-body'>",i+="<div class='row'>",i+="<div class='col-12 mt-4'>",i+="<div class='row'>",t.patchPanelSlots.forEach((function(t){i+="<div class='col text-center'>",t.patchPanelSlotConectors.forEach((function(t){var e="";t.fiber&&(e+="bg-success"),i+="<a href='#' title='"+(t.description||"No definido")+"' class='"+e+"' style='display:block;' onclick='javascript:dispatch(\""+a.PATCH_DISCONNECT_PORT+'", '+t.id+");return false;'>"+t.number+"</a>"})),i+="</div>"})),i+="</div>",i+="</div>",i+="</div>",i+="</div>",i+="</div>"})),i+="</div>",s[t.id]={tab:t,html:i,active:o},this},addDissconectPortRom:function(t){var e=this;return t.forEach((function(t){t.patchPanels.length&&e.addDisconnectContentRom({id:"rack-"+t.id,label:t.name},t,!1)})),this},addContentDsPorts:function(t,e,o){if(o=o||!1,e.length){var i="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";i+="<div class='card mt-3'>",i+="<div class='card-header'>Segundo 50%</div>",i+="<div class='card-body'>",i+="<div class='row'>";for(var r=e.length/2;r<e.length;r++){var c="";e[r].fiber&&(c+="bg-success"),i+="<div class='col text-center "+c+"'>",i+="<a href='#' "+n.DATA_DS_BOX_ID+"='"+e[r].id+"' style='display:block;' onclick='javascript:dispatch(\""+a.DS_BOX_SHOW_PATH+'", '+e[r].id+');\' oncontextmenu="javascript:DistributionBoxListener.dissconectPort(this);return false;">'+e[r].number+"</a>",i+="</div>"}for(i+="</div>",i+="</div>",i+="</div>",i+="<div class='card mt-3'>",i+="<div class='card-header'>Primer 50%</div>",i+="<div class='card-body'>",i+="<div class='row'>",r=0;r<e.length/2;r++)c="",e[r].fiber&&(c+="bg-success"),i+="<div class='col text-center "+c+"'>",i+="<a href='#' "+n.DATA_DS_BOX_ID+"='"+e[r].id+"' style='display:block;' onclick='javascript:dispatch(\""+a.DS_BOX_SHOW_PATH+'", '+e[r].id+');\' oncontextmenu="javascript:DistributionBoxListener.dissconectPort(this);return false;">'+e[r].number+"</a>",i+="</div>";i+="</div>",i+="</div>",i+="</div>",i+="</div>",s[t.id]={tab:t,html:i,active:o}}return this},addDiscontentDsPorts:function(t,e,o){if(o=o||!1,e.length){var i="<div class='tab-pane "+(o?"show active":"fade")+" p-2' id='"+t.id+"' role='tabpanel' aria-labelledby='"+t.id+"-tab'>";i+="<div class='card mt-3'>",i+="<div class='card-header'>Segundo 50%</div>",i+="<div class='card-body'>",i+="<div class='row'>";for(var a=e.length/2;a<e.length;a++){var r="";e[a].fiber&&(r+="bg-success"),i+="<div class='col text-center "+r+"'>",i+="<a href='#' "+n.DATA_DS_BOX_ID+"='"+e[a].id+"' style='display:block;' onclick=\"javascript:DistributionBoxListener.dissconectPort(this);return false;\">"+e[a].number+"</a>",i+="</div>"}for(i+="</div>",i+="</div>",i+="</div>",i+="<div class='card mt-3'>",i+="<div class='card-header'>Primer 50%</div>",i+="<div class='card-body'>",i+="<div class='row'>",a=0;a<e.length/2;a++)r="",e[a].fiber&&(r+="bg-success"),i+="<div class='col text-center "+r+"'>",i+="<a href='#' "+n.DATA_DS_BOX_ID+"='"+e[a].id+"' style='display:block;' onclick=\"javascript:DistributionBoxListener.dissconectPort(this);return false;\">"+e[a].number+"</a>",i+="</div>";i+="</div>",i+="</div>",i+="</div>",i+="</div>",s[t.id]={tab:t,html:i,active:o}}return this},addSubscriberBoxPhotoBtn:function(t){return c["add-subscriber-box-photo-btn"]="<a href='#' class='btn btn-outline-primary btn-sm ml-2' role='button' onclick='SubscriberBoxFormListener.showPhotoModal("+t+")'><i class='fas fa-cloud-upload-alt'></i> Fotos</a>",this},addDistributionBoxPhotoBtn:function(t){return c["add-distribution-box-photo-btn"]="<a href='#' class='btn btn-outline-primary btn-sm ml-2' role='button' onclick='DistributionBoxFormListener.showPhotoModal("+t+")'><i class='fas fa-cloud-upload-alt'></i> Fotos</a>",this},addTorpedoPhotoBtn:function(t){return c["add-torpedo-photo-btn"]="<a href='#' class='btn btn-outline-primary btn-sm ml-2' role='button' onclick='dispatch(\""+a.TORPEDO_SHOW_PHOTO_MODAL+'",'+t+")'><i class='fas fa-cloud-upload-alt'></i> Fotos</a>",this},build:function(t,e){if(!t||!e)throw new Error("build need width and height arguments.");var o="<div style='width:"+t+"px;min-height:"+e+"px;'>                                <ul class='nav nav-tabs' id='myTab' role='tablist'>";for(var i in s)s.hasOwnProperty(i)&&(o+="<li class='nav-item'>                                    <a class='nav-link "+(s[i].active?"active":"")+"' id='"+i+"-tab' data-toggle='tab' href='#"+i+"' role='tab' aria-controls='home' aria-selected='true'>"+s[i].tab.label+"</a>                                </li>");for(var i in o+="</ul>",o+="<div class='tab-content' id='myTabContent'>",s)s.hasOwnProperty(i)&&(o+=s[i].html);for(var i in o+="</div>",o+="<div class='d-block text-right'>",c)c.hasOwnProperty(i)&&(o+=c[i]);return o+="</div>",o+="</div>"}}),s={},c={},r}});t.exports=l},function(t,e){t.exports={MAX_WIDTH:400}},function(t,e){t.exports={SUBSCRIBER_BOX:"subscriber-box",SUBSCRIBER_BOX_EXT:"subscriber-box-ext",DISTRIBUTION_BOX:"distribution-box",LAYER:"layer-group",WIRE:"wire",TORPEDO:"torpedo"}},function(t,e,o){const i=o(14),n=o(4);var a=Object.create(i);a.createLayer=function(t,e){var o="No definido";return t.hasOwnProperty("title")&&(o=t.title),t.hasOwnProperty("name")&&(o=t.name),t.latitude&&t.longitude&&t.icon?L.marker([t.latitude,t.longitude],{icon:L.icon({iconUrl:n.IMAGE_UPLOADS+t.icon,iconSize:e}),contextmenu:!0,contextmenuInheritItems:!1,title:o}):L.marker([0,0],{title:" "})},t.exports=a},function(t,e){var o=function(t){this.id=t?t.id:0,this.location=t?t.location:"No definida"};o.prototype={toString:function(){return this.location}},t.exports=o},function(t,e,o){o(6);var i={createLayer:function(t){throw new Error("Abstract method!")}};t.exports=i},function(t,e){t.exports={OK:200,FORBIDDEN:403,NOT_FOUND:404,SERVER_ERROR:500,BAD_REQUEST:400}},function(t,e,o){const i=o(41),n=o(42),a=o(43),r=(o(19),o(3)),s=o(44),c=o(45);var l=new Vue({el:"#map",data:{map:null,lControl:L.control.layers(),lGroup:L.layerGroup([]),lSearch:new L.Control.Search({layer:L.layerGroup([]),textPlaceholder:"Buscar elemento",textErr:"Elemento no encontrado.",textCancel:"Cancelar",zoom:999,marker:{circle:{weight:5}}})},methods:{renderLayerControl:function(t){var e=L.layerGroup(t.getLayers()).addTo(this.map),o="<div style='color:"+t.hexaColor+";display:inline'>"+t.name+"</div>";this.lControl.addOverlay(e,o).addTo(this.map)},renderMap:function(t){var e=this;if(t.maps){var o=t.maps[0].maxZoom-Math.round((t.maps[0].maxZoom-t.maps[0].minZoom)/2);this.map=L.map("map",{attributionControl:!1,editable:!0,renderer:L.canvas(),contextmenu:!0,contextmenuItems:[{text:"<strong>Mapa</strong>",disabled:!0},{text:"Mostrar coordenadas",callback:function(t){r.showModal("Información","                                    <p>Latitud: "+t.latlng.lat+"</p>                                    <p>Longitud: "+t.latlng.lng+"</p>                                ")}},{text:"Nueva nota",callback:function(t){s.showForm(t.latlng.lat,t.latlng.lng)}},{text:"Nueva alerta",callback:function(t){c.showForm(t.latlng.lat,t.latlng.lng)}},"-"]}).setView([t.latitude,t.longitude],o),t.maps.forEach((function(t){var o=null;o=t.wms?L.tileLayer.wms(t.url,{layers:t.name,format:"image/png",transparent:!0,version:t.version,attribution:t.displayName,minZoom:t.minZoom,maxZoom:t.maxZoom}):L.tileLayer(t.url,{minZoom:t.minZoom,maxZoom:t.maxZoom}),e.lControl.addBaseLayer(o,t.displayName).addTo(e.map),t.defaultMap&&e.map.addLayer(o)}))}this.renderEditControls(),this.renderSearchControl()},renderEditControls:function(){var t=new L.Control.Draw({draw:{polyline:!0,polygon:!0,circle:!1,rectangle:!1,marker:!0,circlemarker:!1}});L.drawLocal.draw.toolbar.buttons.polyline="Añadir Cable",L.drawLocal.draw.toolbar.buttons.marker="Añadir Caja",L.drawLocal.draw.toolbar.buttons.polygon="Añadir delimitador",L.drawLocal.draw.handlers.polygon.tooltip.start="Click para comenzar el delimitador",L.drawLocal.draw.handlers.polygon.tooltip.cont="Click para crear vértice (mínimo 5)",L.drawLocal.draw.handlers.polygon.tooltip.end="Click en el último vértice para finalizar",L.drawLocal.draw.handlers.polyline.tooltip.start="Click para comenzar el cableado",L.drawLocal.draw.handlers.polyline.tooltip.cont="Click para crear vértice",L.drawLocal.draw.handlers.polyline.tooltip.end="Click en el último vértice para finalizar",L.drawLocal.draw.handlers.marker.tooltip.start="Click para ubicar",this.map.addControl(t);var e=this;i.addCenterPositionControl(this.map,(function(){n.getLocation().then((function(t){var o=t.coords;e.map.flyTo([o.latitude,o.longitude],a.ARCGIS_STREET_SATELITE.maxZoom)}))}))},renderSearchControl:function(){this.lSearch.addTo(this.map),this.lSearch.setLayer(this.lGroup)},renderFixedLayer:function(t){this.map.addLayer(t),t instanceof L.Marker&&(this.lGroup.addLayer(t),this.lSearch.setLayer(this.lGroup))},subscribe:function(t){this.map.on(t.getEventType(),(function(e){t.listen(e)}))},addLayersToSearch:function(t){var e=this;t.forEach((function(t){t.getLayers().forEach((function(t){t instanceof L.Marker&&e.lGroup.addLayer(t)}))})),this.lSearch.setLayer(this.lGroup)},renderLayer:function(t){this.map.addLayer(t),t instanceof L.Marker&&(this.lGroup.addLayer(t),this.lSearch.setLayer(this.lGroup))},deleteLayer:function(t){this.map.removeLayer(t),t instanceof L.Marker&&(this.lGroup.removeLayer(t),this.lSearch.setLayer(this.lGroup))}}});t.exports=l},function(t,e){t.exports={ELEMENT_SAVE_FORM:"ElementFormListener.saveForm",TORPEDO_SHOW_PHOTO_MODAL:"TorpedoFormListener.showPhotoModal",TORPEDO_DELETE_FUSION:"TorpedoFusionListener.deleteFusion",PATCH_SHOW_PATH:"PatchPanelListener.showPath",PATCH_SHOW_PROMPT:"PatchPanelListener.showPrompt",PATCH_DISCONNECT_PORT:"PatchPanelListener.disconnectPort",PATCH_CONNECT_PORTS:"PatchPanelListener.connectPorts",DS_BOX_SHOW_PATH:"DsBoxListener.showPath"}},function(t,e){t.exports={TORPEDO:"torpedo",DISTRIBUTION_BOX:"distributionBox",SUBSCRIBER_BOX:"subscriberBox",SUBSCRIBER_BOX_EXT:"subscriberBoxExt"}},function(t,e){var o={showLoader:function(t){var e=document.getElementById("loader"),o=document.getElementById("loader-message");e.style.display="block",t&&(o.innerHTML=t)},hideLoader:function(){var t=document.getElementById("loader"),e=document.getElementById("loader-message");t.style.display="none",e.innerHTML=""},showRender:function(t){var e=document.getElementById("render"),o=document.getElementById("render-message");e.style.display="block",t&&(o.innerHTML=t)},hideRender:function(){var t=document.getElementById("render"),e=document.getElementById("render-message");t.style.display="none",e.innerHTML=""}};t.exports=o},function(t,e,o){const i=o(8),n=o(48);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.name,t.coordinates,t.hexaColor,t.weight)},t.exports=a},function(t,e){t.exports={DATA_DS_BOX_ID:"data-ds-port-id"}},function(t,e,o){const i=o(1),n=o(3),a=(o(23),o(2)),r=o(0),s=(o(24),o(21));var c={dissconectPort:function(t){var e=$(t).attr(s.DATA_DS_BOX_ID);n.showConfirm("Desconectar puerto Caja Distribución","¿Estás seguro que quieres desconectar el puerto <strong>"+t.innerHTML+"</strong>?",(function(t){t&&i.put(r.PUT_DISTRIBUTION_PORT+"/"+e+"/disconnect").then((function(t){a.success(t.data.message)})).catch((function(t){console.error(t)}))}))}};t.exports=c},function(t,e){var o={showTree:function(t){var e=$("#"+t);e.bind("ready.jstree",(function(){e.jstree("open_all")})).jstree()}};t.exports=o},function(t,e,o){const i=o(1),n=o(0),a=o(4);var r,s,c,l,d=(s="",c=0,l=null,{getInstance:function(){return r||(r={addOltPath:async function(){if(l){var t=l.latiguilloPatch;if(s+="<ul>",s+="<li>",s+="Conector CPD: ",s+=l.patchPanelSlot.patchPanel.rack.name+"_",s+=l.patchPanelSlot.patchPanel.name+"_",s+=l.patchPanelSlot.number+"_",s+=l.number,s+=" <strong>("+l.patchPanelSlot.patchPanel.rack.name+")</strong>",s+="<ul>",s+="<li>",s+="Latiguillo a EDFA: "+t.name,t.edfaPort){var e=t.edfaPort;s+="<ul>",s+="<li>",s+="Puerto EDFA: "+e.edfaSlot.edfa.name+" Puerto <strong>"+e.number+"</strong>",await i.get(n.GET_EDFA_PORT_ID+e.id+"/"+("out"===e.edfaSlot.type.toLowerCase()?"in":"out")).then((function(t){var e=t.data;if(e.latiguilloEdfa){var o=e.latiguilloEdfa;if(s+="<ul>",s+="<li>",s+="Latiguillo a OLT: "+o.name,o.oltPort){var i=o.oltPort;s+="<ul>",s+="<li>",s+="Puerto OLT: <strong>"+i.oltSlot.olt.name+" / Tarjeta "+i.oltSlot.number+" / Puerto "+i.number+"</strong>",s+="</li>",s+="</ul>"}s+="</li>",s+="</ul>"}})),s+="</li>",s+="</ul>"}s+="</li>",s+="</ul>",s+="</li>",s+="</ul>"}return this},addRomToOltPath:async function(t){var e=r;return t.latiguilloPatch&&(l=t,s+="<ul>",s+="<li>",s+="<strong>Trayectoria a OLT</strong>",await e.addOltPath(),s+="</li>",s+="</ul>"),this},addDistributionBoxPath:function(t){return t&&(s+="<ul>",s+="<li>",s+="<strong>Trayectoria a Caja Distribución</strong>",s+=r.generateNexo(t),s+="</li>",s+="</ul>"),this},addDsToRomPath:function(t){return t&&(s+="<ul>",s+="<li>",s+="<strong>Trayectoria a CPD</strong>",s+=r.generateNexo(t),s+="</li>",s+="</ul>"),this},generateNexo:function(t){var e=r;c+=parseFloat(t.tube.wire.longitude.toFixed(2));var o="<ul>";return o+='<li data-jstree=\'{"icon":"'+a.IMAGE_UPLOADS+t.tube.wire.image+"\"}'>",o+="Fibra: "+t.tube.wire.name+" ("+t.tube.wire.longitude.toFixed(2)+"m) <strong>("+c+"m)</strong>",o+="<div class='wire tube-left' style='background-color:"+t.tube.hexaColor+"'></div>",o+="<div class='wire fiber-left' style='background-color:"+t.hexaColor+"'></div>",t.torpedoFusions.forEach((function(t){t&&(o+="<ul>",o+='<li data-jstree=\'{"icon":"'+a.IMAGE_UPLOADS+t.torpedo.icon+"\"}'>",o+="Fusión en torpedo: "+t.torpedo.name,t.torpedo.address&&(o+=" <strong>("+t.torpedo.address.location+")</strong>"),t.fibers.forEach((function(t){t&&(o+=e.generateNexo(t))})),o+="</li>",o+="</ul>")})),t.torpedoPassants.forEach((function(t){t&&(o+="<ul>",o+='<li data-jstree=\'{"icon":"'+a.IMAGE_UPLOADS+t.torpedo.icon+"\"}'>",o+="Pasante en torpedo: "+t.torpedo.name,t.torpedo.address&&(o+=" <strong>("+t.torpedo.address.location+")</strong>"),t.fibers.forEach((function(t){t&&(o+=e.generateNexo(t))})),o+="</li>",o+="</ul>")})),t.distributionBoxPassants.forEach((function(t){t&&(o+="<ul>",o+='<li data-jstree=\'{"icon":"'+a.IMAGE_UPLOADS+t.distributionBox.icon+"\"}'>",o+="Pasante en caja distribución: "+t.distributionBox.name,t.distributionBox.address&&(o+=" <strong>("+t.distributionBox.address.location+")</strong>"),t.fibers.forEach((function(t){t&&(o+=e.generateNexo(t))})),o+="</li>",o+="</ul>")})),t.patchPanelSlotConector&&(o+="<ul>",o+="<li>",o+="Conector CPD: ",o+=t.patchPanelSlotConector.patchPanelSlot.patchPanel.rack.name+"_",o+=t.patchPanelSlotConector.patchPanelSlot.patchPanel.name+"_",o+=t.patchPanelSlotConector.patchPanelSlot.number+"_",o+=t.patchPanelSlotConector.number,o+=" <strong>("+t.patchPanelSlotConector.patchPanelSlot.patchPanel.rack.name+")</strong>",o+="</li>",o+="</ul>",t.patchPanelSlotConector.latiguilloPatch&&(l=t.patchPanelSlotConector)),t.distributionBoxPort&&(o+="<ul>",o+='<li data-jstree=\'{"icon":"'+a.IMAGE_UPLOADS+t.distributionBoxPort.distributionBox.icon+"\"}'>",o+="Caja distribución: "+t.distributionBoxPort.distributionBox.name+" <strong>("+t.distributionBoxPort.distributionBox.address.location+")</strong>",o+="</li>",o+="</ul>"),o+="</li>",o+="</ul>"},build:function(){return s+="</div>"}}),s="<div id='tree'>",l=null,c=0,r}});t.exports=d},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this),this.form="<form id='wire-form' action='"+n.POST_WIRE+"' method='POST'>"};(a.prototype=Object.create(i.prototype)).addWirePatterns=function(t){var e=this;return this.form+='<div class="form-group row">            <label for="layer" class="col-sm-2 col-form-label">Patrón</label>            <div class="col-sm-10">                <select class="custom-select" id="wire-pattern" name="wire-pattern">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this},a.prototype.addCoordinates=function(t){return this.form+="<input type='hidden' name='coordinates' value='"+JSON.stringify(t)+"'>",this},a.prototype.addDistance=function(t){return this.form+="<input type='hidden' name='distance' value='"+t+"'>",this},a.prototype.addEditForm=function(t){return this.form="<iframe src='"+n.GET_WIRE_ID+t+"/form' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(8),n=o(52);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.name,t.latitude,t.longitude,t.icon)},t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(9),s=o(10),c=o(2),l=(o(11),o(12)),d=o(13);var u=function(t,e,o,n,a,r){i.call(this,t),this.id=e,this.name=o,this.latitude=n,this.longitude=a,this.icon=r,this.subscriberBoxExts=[],this.marker=l.createLayer(this,[15,25])};u.prototype=Object.create(i.prototype),u.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:s.MAX_WIDTH}),this.subscribeToEvents(),this.marker},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_SUBSCRIBER_ID+t.id).then((function(o){var i=o.data,n=r.getInstance().addContentDescription({id:"description",label:"Descripción"},{Caja:i.name,Tubo:i.tubeColor,"Dirección":new d(i.address)},!0).addContentCarousel({id:"images",label:"Imágenes"},i.images,!1).addContentPdf({id:"pdfs",label:"Archivos"},i.pdfs,!1).addContentClientList({id:"customers",label:"Clientes"},i.customers,!1).addSubscriberBoxPhotoBtn(t.id).build(360,200);e(n)})).catch((function(t){console.error(t),c.error(t.response.data.message)}))}))},getMarker:function(){return this.marker},addSubscriberBoxExt:function(t){return this.subscriberBoxExts.push(t),this},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_SUBSCRIBER,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){c.success(t.data.message)})))},turnOnMarker:function(){this.marker._icon.className+=" selectedMarker"},turnOffMarker:function(){this.marker._icon.className=this.marker._icon.className.replace(" selectedMarker")},turnToogleMarker:function(){this.marker._icon.className.includes("selectedMarker")?this.turnOffMarker():this.turnOnMarker()},turnOnAllSubsExt:function(){this.subscriberBoxExts.forEach((function(t){t.turnOnMarker()}))},turnOffAllSubsExt:function(){this.subscriberBoxExts.forEach((function(t){t.turnOffMarker()}))},turnToogleAllSubsExt:function(){this.subscriberBoxExts.forEach((function(t){t.turnToogleMarker()}))},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:"<strong>Caja "+t.name+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(e){t.edit(e)}},"-",{text:'<i class="far fa-edit"></i> Editar',callback:function(){SubscriberBoxFormListener.showEditModal(t.id)}}]}),this.marker.on("dblclick",(function(e){t.subscriberBoxExts.forEach((function(t){t.turnToogleMarker()}))})),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=u},function(t,e,o){const i=o(5),n=o(0),a=o(7),r=o(1),s=o(2);var c=function(){i.call(this),this.form="<form id='distribution-box-form' action='"+n.POST_DISTRIBUTION+"' method='POST'>"};(c.prototype=Object.create(i.prototype)).addDistributionBoxList=function(t){var e=this;return this.form+="<div class='form-group row'>        <label for='ds' class='col-sm-2 col-form-label'>Caja</label>            <div class='col-sm-10 input-group mb-3'>                <select class='custom-select' id='ds' name='distribution-box'>",t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>        </div>    </div>",this},c.prototype.addSelectWires=function(t){var e=this;return this.form+='<div class="form-group row">            <label for="'+a.DSBOX_CONECTOR_WIRE+'" class="col-sm-2 col-form-label">Cable</label>            <div class="col-sm-10">                <select class="custom-select" id="'+a.DSBOX_CONECTOR_WIRE+'" name="'+a.DSBOX_CONECTOR_WIRE+'">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this},c.prototype.addSelectedWires=function(t,e){var o={operators:{operator1:{top:20,left:20,properties:{title:t.name,inputs:{},outputs:{}}},operator2:{top:20,left:300,properties:{title:e.name,inputs:{},outputs:{}}}}},i=t.tubes.length*t.tubes[0].fibers.length,n=e.ports.length,a=i>n?i:n;return this.form+="<div id='fusion-table' class='fusions text-center' style='height:"+40*a+"px;'>",t.tubes.forEach((function(t){t.fibers.forEach((function(e){o.operators.operator1.properties.outputs[e.id]={},o.operators.operator1.properties.outputs[e.id].label="<div class='form-fusion tube-left' style='background-color:"+t.hexaColor+";height:inherit;'>",o.operators.operator1.properties.outputs[e.id].label+="<div class='form-fusion fiber-left fiber' style='background-color:"+e.hexaColor+";height:10px;' id='"+e.id+"' title='Layer "+t.layer+"'></div>",o.operators.operator1.properties.outputs[e.id].label+="</div>",e.distributionBoxPort&&(o.operators.operator1.properties.outputs[e.id].label+="<i class='far fa-check-circle text-success' title='Esta fibra está conectada a un puerto'></i> ")}))})),e.ports.forEach((function(t){var e="";t.fiber&&(e+="bg-success"),o.operators.operator2.properties.inputs[t.id]={},o.operators.operator2.properties.inputs[t.id].label="<div class='form-fusion tube-right "+e+"'>",o.operators.operator2.properties.inputs[t.id].label+=t.number,o.operators.operator2.properties.inputs[t.id].label+="</div>"})),this.form+="</div>",setTimeout((function(){var t=$("#fusion-table");t.flowchart({data:o,onLinkCreate:function(o,i){var n=i.fromConnector,a=i.toConnector;return r.post("/distribution-box/"+e.id,{fiberId:n,conectorId:a}).then((function(t){s.success(t.data.message)})).catch((function(e){t.flowchart("deleteLink",o),s.error(e.data.message)})),!0}})}),500),this},c.prototype.addEditForm=function(t){return this.form="<iframe src='"+n.GET_DISTRIBUTION_BOX_ID+t+"/form' style='width:100%;height:500px;'></iframe>",this},t.exports=c},function(t,e,o){const i=o(8),n=o(27);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.name,t.latitude,t.longitude,t.icon)},t.exports=a},function(t,e,o){const i=o(8),n=o(56);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.name,t.latitude,t.longitude,t.icon)},t.exports=a},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this),this.form="<form id='subscriber-box-ext-form' action='"+n.POST_SUBSCRIBER_EXT+"' method='POST'>"};(a.prototype=Object.create(i.prototype)).addSubscriberBoxExtList=function(t){var e=this;return this.form+="<div class='input-group mb-3'>            <select class='custom-select' id='ds' name='subscriber-box-ext'>",t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>        </div>",this},a.prototype.addEditForm=function(t){return this.form="<iframe src='"+n.GET_SUBSCRIBER_EXT_ID+t+"/form' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(8),n=o(59);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.name,t.coordinates,t.hexaColor,t.weight)},t.exports=a},function(t,e,o){const i=o(8),n=o(64);o(13);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.name,t.latitude,t.longitude,t.icon)},t.exports=a},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this),this.form="<form id='torpedo-form' action='"+n.POST_TORPEDO+"' method='POST'>"};(a.prototype=Object.create(i.prototype)).addEditForm=function(t){return this.form="<iframe src='"+n.GET_TORPEDO_ID+t+"/form' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(8),n=o(71);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.title,t.latitude,t.longitude,t.icon)},t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(78),s=o(9),c=(o(10),o(2));var l=function(t,e,o,n,a,s){i.call(this,t),this.id=e,this.icon=o,this.latitude=n,this.longitude=a,this.maps=s,this.marker=r.createLayer(this,[100,100])};l.prototype=Object.create(i.prototype),l.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:500}),this.subscribeToEvents(),this.marker},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_CPD_ID+t.id).then((function(t){var o=t.data,i=s.getInstance().addContentDescription({id:"description",label:"Descripción"},{Empresa:o.company.name,"Dirección":o.location,Ciudad:o.company.city},!0).addContentCarousel({id:"images",label:"Imágenes"},o.images,!1);o.racks.forEach((function(t){t.patchPanels.length&&i.addContentRom({id:"rack-"+t.id,label:t.name},t,!1)}));var n=i.build(500,240);e(n)})).catch((function(t){console.error(t)}))}))},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_CPD,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){c.success(t.data.message)})))},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},"-",{text:'<i class="fas fa-unlink"></i> Desconectar puertos',callback:function(){n.get(a.GET_CPD_ID+t.id).then((function(e){var o=e.data,i=s.getInstance();i.addDissconectPortRom(o.racks);var n=i.build(500,240);t.marker.bindPopup(n).openPopup()}))}}]}),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=l},function(t,e,o){t.exports=o(38)},function(t,e,o){o(39)(),o(74)();(new(o(75))).load()},function(t,e,o){const i=o(1),n=o(3),a=o(2),r=o(16),s=o(46),c=o(17),l=o(72),d=o(0),u=o(24),f=o(23),p=o(7),h=o(73);t.exports=function(){document.addEventListener(c.ELEMENT_SAVE_FORM,(function(t){var e=t.detail.parentNode,o=$(e).prop("action"),c=$(e).serializeArray(),l={};$(c).each((function(t,e){l[e.name]=e.value})),i.post(o,l).then((function(t){r.renderLayer(s.factory(t.data,r).getLayer()),a.success(t.data.message),n.hideAll()})).catch((function(t){a.error(t.data.message)}))})),document.addEventListener(c.TORPEDO_SHOW_PHOTO_MODAL,(function(t){var e=t.detail;n.showModal("Fotos",(new l).addPhotoUpload(e).build())})),document.addEventListener(c.TORPEDO_DELETE_FUSION,(function(t){console.log(t);var e=t.detail.fusionId,o=t.detail.el;n.showConfirm("Fusiones","¿Seguro que quiere eliminar la fusión?",(function(t){t&&i.delete(d.DELETE_TORPEDO_FUSION+"/"+e).then((function(t){o.parentNode.parentNode.remove(),a.success(t.data.message)})).catch((function(t){a.error(t.response.data.message)}))}))})),document.addEventListener(c.DS_BOX_SHOW_PATH,(function(t){var e=t.detail;i.get(d.GET_DSBOX_PORT_ID+e).then((async function(t){var e=t.data.fiber,o=u.getInstance();o.addDsToRomPath(e),await o.addOltPath(),n.showModal("Trayectoria",o.build()),f.showTree("tree")}))})),document.addEventListener(c.PATCH_SHOW_PATH,(function(t){var e=t.detail;return i.get(d.GET_CONECTOR_ID+e).then((async function(t){var e=t.data,o=e.fiber,i=u.getInstance();await i.addRomToOltPath(e),await i.addDistributionBoxPath(o),n.showModal("Trayectoria",i.build()),f.showTree("tree")})),!1})),document.addEventListener(c.PATCH_SHOW_PROMPT,(function(t){var e=t.detail;return i.get(d.GET_CONECTOR_ID+e).then((function(t){var e=t.data;n.showPromptDescription("Puerto de patch panel "+e.number,(function(t){t&&i.put(d.PUT_PATCHPORT_DESCRIPTION+e.id,{description:t}).then((function(t){a.success(t.data.message)})).catch((function(t){console.error(t)}))}),e.description)})),!1})),document.addEventListener(c.PATCH_DISCONNECT_PORT,(function(t){var e=t.detail;i.get(d.GET_CONECTOR_ID+e).then((function(t){var o=t.data;n.showConfirm("Puerto patch panel (slot "+o.patchPanelSlot.number+")","¿Desconectar puerto "+o.number+"?",(function(t){t&&i.put(d.PUT_PATCH_PANEL_PORT+"/"+e+"/disconnect").then((function(t){a.success(t.data.message)})).catch((function(t){console.error(t)}))}))}))})),document.addEventListener(c.PATCH_CONNECT_PORTS,(function(t){var e=t.detail;i.get(d.GET_FORM_WIRE).then((function(t){var o=t.data;n.showModal("Nueva conexión",(new h).addSelectWires(o).build(),{ok:{label:"Siguiente",className:"btn-info",callback:function(){var t=document.getElementById(p.DSBOX_CONECTOR_WIRE).value;i.get(d.GET_WIRE_ID+t).then((function(t){var o=t.data;i.get(d.GET_SLOT_ID+e).then((function(t){var e=t.data;n.showModal("Conexiones",(new h).addSelectedWires(o,e).build())}))}))}}}),$("select").select2({width:"100%"})}))}))}},function(t,e,o){o(15);var i={setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){return JSON.parse(localStorage.getItem(t))},clear:function(){localStorage.clear()}};t.exports=i},function(t,e){var o={addControl:function(t,e,o){L.easyButton(t,o).addTo(e)},addCenterPositionControl:function(t,e){L.easyButton("fa-crosshairs",e).addTo(t)},addNewNoteControl:function(t,e){L.easyButton("fas fa-tasks",e).addTo(t)}};t.exports=o},function(t,e){var o={getLocation:function(t){return new Promise((function(e,o){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,o,t):(AlertAdapter.error("Su navegador no soporta la geolocalización"),o("Su navegador no soporta la geolocalización"))}))}};t.exports=o},function(t,e){t.exports={OPEEN_STREET_MAP:{name:"MAPA",displayName:"Mapa",url:"https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",minZoom:16,maxZoom:20},ARCGIS_STREET_SATELITE:{name:"SATELITE",displayName:"Satélite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",minZoom:16,maxZoom:19},CATASTRO:{name:"CATASTRO",displayName:"Catastro",url:"https://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?",minZoom:16,maxZoom:22},CATASTRO_PARCELA:{name:"CABRA_GROUP",displayName:"Catastro Cabra",url:"http://geoserver.intnova.com:8080/geoserver/CABRA/wms?",minZoom:16,maxZoom:22},CATASTRO_CONSTRU:{name:"CONSTRU",displayName:"Construcciones",url:"https://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?",minZoom:16,maxZoom:22}}},function(t,e,o){const i=o(0);var n={showForm:function(t,e){window.location.href=i.GET_NOTE_ID+"new?lat="+t+"&lng="+e}};t.exports=n},function(t,e,o){const i=o(0);var n={showForm:function(t,e){window.location.href=i.GET_ALERT_ID+"new?lat="+t+"&lng="+e}};t.exports=n},function(t,e,o){const i=o(47),n=o(20),a=o(26),r=o(29),s=o(30),c=o(32),l=o(33),d=o(35);var u={factory:function(t,e){var o=null;switch(t.type){case i.WIRE:o=n.buildElement(t.data,e);break;case i.DISTRIBUTION_BOX:o=a.buildElement(t.data,e);break;case i.SUBSCRIBER_BOX:o=r.buildElement(t.data,e);break;case i.SUBSCRIBER_BOX_EXT:o=s.buildElement(t.data,e);break;case i.LAYER:o=c.buildElement(t.data,e);break;case i.TORPEDO:o=l.buildElement(t.data,e);break;case i.NOTE:o=d.buildElement(t.data,e)}return o}};t.exports=u},function(t,e){t.exports={WIRE:"App\\Entity\\Wire",DISTRIBUTION_BOX:"App\\Entity\\DistributionBox",SUBSCRIBER_BOX:"App\\Entity\\SubscriberBox",SUBSCRIBER_BOX_EXT:"App\\Entity\\SubscriberBoxExt",LAYER:"App\\Entity\\LayerGroup",TORPEDO:"App\\Entity\\Torpedo",NOTE:"App\\Entity\\Note"}},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(9),s=o(10),c=o(2),l=(o(11),o(49)),d=o(50),u=o(51);var f=function(t,e,o,n,a,r){i.call(this,t),this.id=e,this.name=o,this.coordinates=n,this.hexaColor=a,this.weight=r,this.polyline=l.createLayer(this)};f.prototype=Object.create(i.prototype),f.prototype={getLayer:function(){return this.polyline.bindPopup("",{maxWidth:s.MAX_WIDTH}),this.subscribeToEvents(),this.polyline},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_WIRE_ID+t.id).then((function(t){var o=t.data,i=r.getInstance().addContentDescription({id:"description",label:"Descripción"},{Cable:o.name,Longitud:o.longitude.toFixed(2).toString()+"m"},!0).addContentCarousel({id:"images",label:"Imágenes"},[{filePath:o.image}],!1).build(250,240);e(i)})).catch((function(t){console.error(t),c.error(t.response.data.message)}))}))},edit:function(){this.polyline.toggleEdit();var t=this.polyline;this.polyline.editEnabled()||(this.coordinates=t.getLatLngs(),n.post(a.PUT_WIRE,{id:this.id,coordinates:this.coordinates}).then((function(t){c.success(t.data.message)})))},subscribeToEvents:function(){var t=this;this.polyline.bindContextMenu({contextmenuItems:[{text:"<strong>Cable "+t.name+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},"-",{text:'<i class="far fa-edit"></i> Editar',callback:function(){u.showEditModal(t.id)}},"-",{text:'<i class="far fa-trash-alt"></i> Eliminar',callback:function(){d.delete(t.id).then((function(){t.mapView.deleteLayer(t.polyline)}))}}]}),this.polyline.on("click",(function(e){t.generatePopUp().then((function(e){t.polyline.bindPopup(e)}))}))}},t.exports=f},function(t,e,o){const i=o(14);o(4);var n=Object.create(i);n.createLayer=function(t){return t.coordinates.length&&t.hexaColor&&t.weight?L.polyline(t.coordinates,{color:t.hexaColor,weight:t.weight,contextmenu:!0,contextmenuInheritItems:!1,title:t.name||"No definido"}):L.polyline([[0,0],[0,0]],{title:" "})},t.exports=n},function(t,e,o){const i=o(1),n=o(3),a=o(2),r=o(0);var s={delete:function(t){return new Promise((function(e,o){n.showConfirm("Cable","¿Seguro que quiere eliminar este cable?",(function(n){n&&i.delete(r.DELETE_WIRE_ID+t).then((function(t){return a.success(t.data.message),e()})).catch((function(t){return console.error(t),o()}))}))}))}};t.exports=s},function(t,e,o){const i=o(3),n=o(25);var a={showEditModal:function(t){i.showModal("Editar Cable",(new n).addEditForm(t).build())}};t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(12),s=o(9),c=(o(10),o(2)),l=(o(27),o(11),o(22),o(53)),d=o(54),u=o(13);var f=function(t,e,o,n,a,s){i.call(this,t),this.id=e,this.name=o,this.latitude=n,this.longitude=a,this.icon=s,this.subscriberBoxes=[],this.marker=r.createLayer(this,[30,30])};f.prototype=Object.create(i.prototype),f.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:500}),this.subscribeToEvents(),this.marker},getLayers:function(){var t=[];return t.push(this.getLayer()),this.subscriberBoxes.forEach((function(e){t.push(e.getLayer())})),t},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_DISTRIBUTION_BOX_ID+t.id).then((function(o){var i=o.data,n=s.getInstance().addContentDescription({id:"description",label:"Descripción"},{Caja:i.name,"Dirección":new u(i.address)},!0).addContentCarousel({id:"images",label:"Imágenes"},i.images,!1).addContentPdf({id:"pdfs",label:"Archivos"},i.pdfs,!1).addContentDsPorts({id:"ports",label:"Puertos"},i.ports,!1).addContentPassant({id:"passant",label:"Pasantes"},i.passants,!1).addDistributionBoxPhotoBtn(t.id).build(500,240);e(n)})).catch((function(t){console.error(t),c.error(t.response.data.message)}))}))},addSubscriberbox:function(t){this.subscriberBoxes.push(t)},getSubscriberBoxes:function(){return this.subscriberBoxes},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_DISTRIBUTION,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){c.success(t.data.message)})))},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:"<strong>Caja "+t.name+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},"-",{text:'<i class="far fa-edit"></i> Editar',callback:function(){d.showEditModal(t.id)}},{text:'<i class="fas fa-plug"></i> Conectar puertos',callback:function(){l.showModal(t.id)}},{text:'<i class="fas fa-network-wired"></i> Añadir pasantes',callback:function(){DistributionBoxPassantListener.showModal(t.id)}},"-",{text:'<i class="fas fa-unlink"></i> Desconectar puertos',callback:function(){n.get(a.GET_DISTRIBUTION_BOX_ID+t.id).then((function(e){var o=e.data,i=s.getInstance().addDiscontentDsPorts({id:"ports",label:"Desconectar puertos"},o.ports,!0).build(500,240);t.marker.bindPopup(i).openPopup()}))}},{text:'<i class="fas fa-cut"></i> Eliminar pasantes',callback:function(){DistributionBoxPassantListener.deletePasants(t.id)}}]}),this.marker.on("dblclick",(function(e){t.subscriberBoxes.forEach((function(t){t.turnToogleMarker(),t.turnToogleAllSubsExt()}))})),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=f},function(t,e,o){const i=o(1),n=o(0),a=o(3),r=o(2),s=o(7);var c={showModal:function(t){i.get(n.GET_FORM_WIRE).then((function(e){var o=e.data;a.showModal("Nueva conexión",(new DistributionBoxFormBuilder).addSelectWires(o).build(),{ok:{label:"Siguiente",className:"btn-info",callback:function(){var e=document.getElementById(s.DSBOX_CONECTOR_WIRE).value;i.get(n.GET_WIRE_ID+e).then((function(e){var o=e.data;i.get(n.GET_DISTRIBUTION_BOX_ID+t).then((function(t){var e=t.data;a.showModal("Conexiones",(new DistributionBoxFormBuilder).addSelectedWires(o,e).build())}))}))}}}),$("select").select2({width:"100%"})}))},deleteFusion(t,e){i.delete(n.DELETE_TORPEDO_FUSION+"/"+t).then((function(t){e.parentNode.parentNode.remove(),r.success(t.data.message)})).catch((function(t){r.error(t.data.message)}))}};t.exports=c},function(t,e,o){o(3),o(55);const i=o(28);t.exports=i},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this)};(a.prototype=Object.create(i.prototype)).addPhotoUpload=function(t){return this.form="<iframe src='"+n.POST_DISTRIBUTION_IMAGE+t+"/upload' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(9),s=o(10),c=o(2),l=(o(11),o(12)),d=o(57),u=o(13);var f=function(t,e,o,n,a,r){i.call(this,t),this.id=e,this.name=o,this.latitude=n,this.longitude=a,this.icon=r,this.marker=l.createLayer(this,[15,25])};f.prototype=Object.create(i.prototype),f.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:s.MAX_WIDTH}),this.subscribeToEvents(),this.marker},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_SUBSCRIBER_EXT_ID+t.id).then((function(t){var o=t.data,i=r.getInstance().addContentDescription({id:"description",label:"Descripción"},{"Caja de extensión":o.name,"Dirección":new u(o.address)},!0).addContentCarousel({id:"images",label:"Imágenes"},o.images,!1).addContentClientList({id:"customers",label:"Clientes"},o.customers,!1).build(350,240);e(i)})).catch((function(t){console.error(t),c.error(t.response.data.message)}))}))},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_SUBSCRIBER_EXT,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){c.success(t.data.message)})))},turnOnMarker:function(){this.marker._icon.className+=" selectedMarker"},turnOffMarker:function(){this.marker._icon.className=this.marker._icon.className.replace(" selectedMarker")},turnToogleMarker:function(){this.marker._icon.className.includes("selectedMarker")?this.turnOffMarker():this.turnOnMarker()},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:"<strong>Caja "+t.name+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(e){t.edit(e)}},"-",{text:'<i class="far fa-edit"></i> Editar',callback:function(){d.showEditModal(t.id)}}]}),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=f},function(t,e,o){const i=o(1),n=o(3),a=o(0),r=o(31),s=o(58);var c={showPhotoModal:function(t){i.get(a.GET_SUBSCRIBER_ID+t).then((function(t){var e=t.data;n.showModal("Fotos",(new s).addPhotoUpload(e).build())}))},showEditModal:function(t){n.showModal("Editar Caja",(new r).addEditForm(t).build())}};t.exports=c},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this)};(a.prototype=Object.create(i.prototype)).addPhotoUpload=function(t){return this.form="<iframe src='"+n.POST_SUBSCRIBER_IMAGE+t.id+"/upload' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=(o(9),o(10),o(2)),s=(o(11),o(60)),c=o(61),l=o(63);var d=function(t,e,o,n,a,r){i.call(this,t),this.id=e,this.name=o,this.coordinates=n,this.hexaColor=a,this.weight=r,this.distributionBoxes=[],this.subscriberBoxes=[],this.subscriberBoxesExt=[],this.wires=[],this.torpedos=[],this.polygon=s.createLayer(this)};d.prototype=Object.create(i.prototype),d.prototype={addDistributionBox:function(t){this.distributionBoxes.push(t)},addSubscriberBox:function(t){this.subscriberBoxes.push(t)},addSubscriberBoxExt:function(t){this.subscriberBoxesExt.push(t)},addWire:function(t){this.wires.push(t)},addTorpedo:function(t){this.torpedos.push(t)},getLayer:function(){return this.subscribeToEvents(),this.polygon},getLayers:function(){var t=[];return this.polygon&&t.push(this.getLayer()),this.distributionBoxes.forEach((function(e){t.push(e.getLayer())})),this.subscriberBoxes.forEach((function(e){t.push(e.getLayer())})),this.subscriberBoxesExt.forEach((function(e){t.push(e.getLayer())})),this.wires.forEach((function(e){t.push(e.getLayer())})),this.torpedos.forEach((function(e){t.push(e.getLayer())})),t},getDistributionBoxLayer:function(){var t=[];return this.distributionBoxes.forEach((function(e){t.push(e.getLayer()),e.getSubscriberBoxes().forEach((function(e){t.push(e.getLayer())}))})),t},edit:function(){this.polygon.toggleEdit();var t=this.polygon;this.polygon.editEnabled()||(this.coordinates=t.getLatLngs(),n.post(a.PUT_LAYER,{id:this.id,coordinates:this.coordinates}).then((function(t){r.success(t.data.message)})))},subscribeToEvents:function(){var t=this;this.polygon.bindContextMenu({contextmenuItems:[{text:"<strong>"+t.name+"</strong>",disabled:!0},{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},{text:'<i class="far fa-edit"></i> Editar',callback:function(){c.showEditModal(t.id)}},{text:'<i class="far fa-trash-alt"></i> Eliminar',callback:function(){l.delete(t.id).then((function(){t.mapView.deleteLayer(t.polygon)}))}}]})},toString:function(){return this.name}},t.exports=d},function(t,e,o){const i=o(14);o(4);var n=Object.create(i);n.createLayer=function(t){return t.coordinates&&t.hexaColor&&t.weight?L.polygon(t.coordinates,{color:t.hexaColor,weight:t.weight,contextmenu:!0,contextmenuInheritItems:!0,title:t.name||"No definido"}):L.polygon([[0,0],[0,0]],{title:" "})},t.exports=n},function(t,e,o){const i=o(3),n=o(62);var a={showEditModal:function(t){i.showModal("Editar Delimitador",(new n).addEditForm(t).build())}};t.exports=a},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this)};(a.prototype=Object.create(i.prototype)).addEditForm=function(t){return this.form="<iframe src='"+n.GET_LAYER_GROUP_ID+t+"/form' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(1),n=o(3),a=o(2),r=o(0);var s={delete:function(t){return new Promise((function(e,o){n.showConfirm("Delimitador","¿Seguro que quiere eliminar este delimitador?",(function(n){n&&i.delete(r.DELETE_LAYER_ID+t).then((function(t){return a.success(t.data.message),e()})).catch((function(t){return console.error(t),o()}))}))}))}};t.exports=s},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(9),s=(o(10),o(2)),c=(o(11),o(12)),l=o(65),d=o(66),u=o(68),f=o(70),p=o(13);var h=function(t,e,o,n,a,r){i.call(this,t),this.id=e,this.name=o,this.latitude=n,this.longitude=a,this.icon=r,this.marker=c.createLayer(this,[50,75])};h.prototype=Object.create(i.prototype),h.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:"none"}),this.subscribeToEvents(),this.marker},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_TORPEDO,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){s.success(t.data.message)})))},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_TORPEDO_ID+t.id).then((function(o){var i=o.data,n=r.getInstance().addContentDescription({id:"description",label:"Descripción"},{Torpedo:i.name,"Dirección":new p(i.address)},!0).addContentCarousel({id:"images",label:"Imágenes"},i.images,!1).addContentPdf({id:"pdfs",label:"Archivos"},i.pdfs,!1).addContentFusion({id:"fusions",label:"Fusiones"},i.torpedoFusions,!1).addContentPassant({id:"passant",label:"Pasantes"},i.passants,!1).addTorpedoPhotoBtn(t.id).build(550,240);e(n)})).catch((function(t){console.error(t),s.error(t.response.data.message)}))}))},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:"<strong>Torpedo "+t.name+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},"-",{text:'<i class="far fa-edit"></i> Editar',callback:function(){f.showEditModal(t.id)}},{text:'<i class="fas fa-link"></i> Añadir fusiones',callback:function(){d.showFusionModal(t.id)}},{text:'<i class="fas fa-network-wired"></i> Añadir pasantes',callback:function(){u.showPassantModal(t.id)}},"-",{text:'<i class="fas fa-cut"></i> Eliminar pasantes',callback:function(){u.deletePasants(t.id)}},{text:'<i class="far fa-trash-alt"></i> Eliminar',callback:function(){l.delete(t.id).then((function(){t.mapView.deleteLayer(t.marker)}))}}]}),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=h},function(t,e,o){const i=o(1),n=o(3),a=o(2),r=o(0);var s={delete:function(t){return new Promise((function(e,o){n.showConfirm("Torpedo","¿Seguro que quiere eliminar este torpedo?",(function(n){n&&i.delete(r.DELETE_TORPEDO_ID+t).then((function(t){return a.success(t.data.message),e()})).catch((function(t){return console.error(t),o()}))}))}))}};t.exports=s},function(t,e,o){const i=o(1),n=o(3),a=o(0),r=o(67),s=o(7);o(2);var c={showFusionModal:function(t){i.get(a.GET_FORM_WIRE).then((function(e){var o=e.data;n.showModal("Nueva fusión",(new r).addSelectWires(o).build(),{ok:{label:"Siguiente",className:"btn-info",callback:function(){var e=document.getElementById(s.FUSION_WIRE_1).value,o=document.getElementById(s.FUSION_WIRE_2).value;i.get(a.GET_WIRE_ID+e).then((function(e){var s=e.data;i.get(a.GET_WIRE_ID+o).then((function(e){var o=e.data;n.showModal("Fusiones",(new r).addSelectedWires(s,o,t).build())}))}))}}}),$("select").select2({width:"100%"})}))}};t.exports=c},function(t,e,o){const i=o(5),n=o(0),a=o(7),r=o(1),s=o(2);var c=function(){i.call(this)};(c.prototype=Object.create(i.prototype)).addSelectWires=function(t){var e=this;return this.form+='<div class="form-group row">            <label for="'+a.FUSION_WIRE_1+'" class="col-sm-2 col-form-label">Cable 1</label>            <div class="col-sm-10">                <select class="custom-select" id="'+a.FUSION_WIRE_1+'" name="'+a.FUSION_WIRE_1+'">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this.form+='<div class="form-group row">            <label for="'+a.FUSION_WIRE_2+'" class="col-sm-2 col-form-label">Cable 2</label>            <div class="col-sm-10">                <select class="custom-select" id="'+a.FUSION_WIRE_2+'" name="'+a.FUSION_WIRE_2+'">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this},c.prototype.addSelectedWires=function(t,e,o){var i={operators:{operator1:{top:20,left:20,properties:{title:t.name,inputs:{},outputs:{}}},operator2:{top:20,left:300,properties:{title:e.name,inputs:{},outputs:{}}}}},a=t.tubes.length*t.tubes[0].fibers.length,c=e.tubes.length*e.tubes[0].fibers.length,l=a>c?a:c;return this.form+="<div id='fusion-table' class='fusions text-center' style='height:"+40*l+"px;'>",t.tubes.forEach((function(t){t.fibers.forEach((function(e){i.operators.operator1.properties.outputs[e.id]={},i.operators.operator1.properties.outputs[e.id].label="<div class='form-fusion tube-left' style='background-color:"+t.hexaColor+";height:inherit;'>",i.operators.operator1.properties.outputs[e.id].label+="<div class='form-fusion fiber-left fiber' style='background-color:"+e.hexaColor+";height:10px;' id='"+e.id+"' title='Layer "+t.layer+"'></div>",i.operators.operator1.properties.outputs[e.id].label+="</div>",i.operators.operator1.properties.outputs[e.id].label+="</div>"}))})),e.tubes.forEach((function(t){t.fibers.forEach((function(e){i.operators.operator2.properties.inputs[e.id]={},i.operators.operator2.properties.inputs[e.id].label="<div class='form-fusion tube-right' style='background-color:"+t.hexaColor+";height:inherit;'>",i.operators.operator2.properties.inputs[e.id].label+="<div class='form-fusion fiber-right fiber' style='background-color:"+e.hexaColor+";height:10px;' id='"+e.id+"' title='Layer "+t.layer+"'></div>",i.operators.operator2.properties.inputs[e.id].label+="</div>",i.operators.operator2.properties.inputs[e.id].label+="</div>"}))})),this.form+="</div>",setTimeout((function(){var t=$("#fusion-table");t.flowchart({data:i,onLinkCreate:function(e,i){var a=i.fromConnector,c=i.toConnector;return r.post(n.GET_TORPEDO_FUSION_ID+o,{fiber1Id:a,fiber2Id:c}).then((function(t){s.success(t.data.message)})).catch((function(o){t.flowchart("deleteLink",e),s.error(o.data.message)})),!0}})}),500),this},t.exports=c},function(t,e,o){const i=o(1),n=o(3),a=o(0),r=o(69),s=o(7),c=o(2);var l={showPassantModal:function(t){i.get(a.GET_FORM_WIRE).then((function(e){var o=e.data;n.showModal("Nuevo pasante",(new r).addSelectWires(o).build(),{ok:{label:"Enlazar",className:"btn-info",callback:function(){var e=document.getElementById(s.FUSION_WIRE_1).value,o=document.getElementById(s.FUSION_WIRE_2).value;i.get(a.GET_WIRE_ID+e).then((function(e){var n=e.data;i.get(a.GET_WIRE_ID+o).then((function(e){var o=e.data;i.post(a.POST_TORPEDO_PASSANT+"/"+t,{wire1Id:n.id,wire2Id:o.id,torpedoId:t}).then((function(t){c.success(t.data.message)}))}))}))}}}),$("select").select2({width:"100%"})}))},deletePasants(t){n.showConfirm("Pasantes","¿Seguro que quiere eliminar todos los pasantes?",(function(e){e&&(console.log(t),i.delete(a.DELETE_TORPEDO_PASSANT_ID+t).then((function(t){c.success(t.data.message)})).catch((function(t){c.error(t.response.data.message)})))}))}};t.exports=l},function(t,e,o){const i=o(5),n=o(0),a=o(7),r=o(1),s=o(2);var c=function(){i.call(this)};(c.prototype=Object.create(i.prototype)).addSelectWires=function(t){var e=this;return this.form+='<div class="form-group row">            <label for="'+a.FUSION_WIRE_1+'" class="col-sm-2 col-form-label">Cable 1</label>            <div class="col-sm-10">                <select class="custom-select" id="'+a.FUSION_WIRE_1+'" name="'+a.FUSION_WIRE_1+'">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this.form+='<div class="form-group row">            <label for="'+a.FUSION_WIRE_2+'" class="col-sm-2 col-form-label">Cable 2</label>            <div class="col-sm-10">                <select class="custom-select" id="'+a.FUSION_WIRE_2+'" name="'+a.FUSION_WIRE_2+'">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this},c.prototype.addSelectedWires=function(t,e,o){return r.post(n.POST_TORPEDO_PASSANT+"/"+o,{wire1Id:t.id,wire2Id:e.id,torpedoId:o}).then((function(t){s.success(t.data.message)})),this},t.exports=c},function(t,e,o){const i=o(3),n=o(34);var a={showEditModal:function(t){i.showModal("Editar Torpedo",(new n).addEditForm(t).build())}};t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(9),s=(o(10),o(2)),c=o(12);var l=function(t,e,o,n,a,r){i.call(this,t),this.id=e,this.title="Nota: "+o,this.latitude=n,this.longitude=a,this.icon=r,this.marker=c.createLayer(this,[21,20])};l.prototype=Object.create(i.prototype),l.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:"none"}),this.subscribeToEvents(),this.marker},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_NOTE,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){s.success(t.data.message)})))},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_NOTE_ID+t.id).then((function(t){var o=t.data,i=r.getInstance().addContentDescription({id:"description",label:"Descripción"},{"Título":o.title,"Descripción":o.description},!0).addContentImage({id:"image",label:"Imagen"},o.image,!1).build(550,240);e(i)})).catch((function(t){console.error(t),s.error(t.response.data.message)}))}))},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:"<strong>"+t.title+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},"-",{disabled:!0,text:'<i class="far fa-edit"></i> Editar',callback:function(){s.error("No habilitado")}}]}),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=l},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this)};(a.prototype=Object.create(i.prototype)).addPhotoUpload=function(t){return this.form="<iframe src='"+n.POST_TORPEDO_IMAGE+t+"/upload' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(5),n=o(0),a=o(7),r=o(1),s=o(2);var c=function(){i.call(this)};(c.prototype=Object.create(i.prototype)).addSelectWires=function(t){var e=this;return this.form+='<div class="form-group row">            <label for="'+a.DSBOX_CONECTOR_WIRE+'" class="col-sm-2 col-form-label">Cable</label>            <div class="col-sm-10">                <select class="custom-select" id="'+a.DSBOX_CONECTOR_WIRE+'" name="'+a.DSBOX_CONECTOR_WIRE+'">',t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>            </div>        </div>",this},c.prototype.addSelectedWires=function(t,e){var o={operators:{operator1:{top:20,left:20,properties:{title:t.name,inputs:{},outputs:{}}},operator2:{top:20,left:300,properties:{title:e.name,inputs:{},outputs:{}}}}},i=t.tubes.length*t.tubes[0].fibers.length,a=e.patchPanelSlotConectors.length,c=i>a?i:a;return this.form+="<div id='fusion-table' class='fusions text-center' style='height:"+40*c+"px;'>",t.tubes.forEach((function(t){t.fibers.forEach((function(e){o.operators.operator1.properties.outputs[e.id]={},o.operators.operator1.properties.outputs[e.id].label="<div class='form-fusion tube-left' style='background-color:"+t.hexaColor+";height:inherit;'>",o.operators.operator1.properties.outputs[e.id].label+="<div class='form-fusion fiber-left fiber' style='background-color:"+e.hexaColor+";height:10px;' id='"+e.id+"' title='Layer "+t.layer+"'></div>",o.operators.operator1.properties.outputs[e.id].label+="</div>",e.slotPort&&(o.operators.operator1.properties.outputs[e.id].label+="<i class='far fa-check-circle text-success' title='Esta fibra está conectada a un puerto'></i> ")}))})),e.patchPanelSlotConectors.forEach((function(t){var e="";t.fiber&&(e+="bg-success"),o.operators.operator2.properties.inputs[t.id]={},o.operators.operator2.properties.inputs[t.id].label="<div class='form-fusion tube-right "+e+"'>",o.operators.operator2.properties.inputs[t.id].label+=t.number,o.operators.operator2.properties.inputs[t.id].label+="</div>"})),this.form+="</div>",setTimeout((function(){var t=$("#fusion-table");t.flowchart({data:o,onLinkCreate:function(e,o){var i=o.fromConnector,a=o.toConnector;return r.post(n.POST_PATCH_CONECTOR+a,{fiberId:i}).then((function(t){s.success(t.data.message)})).catch((function(o){t.flowchart("deleteLink",e),s.error(o.data.message)})),!0}})}),500),this},t.exports=c},function(t,e){t.exports=function(){window.dispatch=function(t,e){document.dispatchEvent(new CustomEvent(t,{detail:e}))}}},function(t,e,o){const i=o(16),n=o(76),a=o(79),r=o(80),s=o(83);var c=function(){this.mapView=i};c.prototype={load:async function(){var t=this,e=await n.getInstance().getCpd();t.mapView.renderMap(e),t.mapView.renderLayer(e.getLayer());var o=await a.getInstance().getLayers(t.mapView);o.forEach((function(e){t.mapView.renderLayerControl(e)})),t.mapView.subscribe(new s(t)),t.mapView.addLayersToSearch(o),(await r.getInstance().getNotes()).forEach((function(e){t.mapView.renderLayer(e.getLayer())})),(await r.getInstance().getAlerts()).forEach((function(e){t.mapView.renderLayer(e.getLayer())}))},addLayer:function(t){this.mapView.renderLayer(t)}},t.exports=c},function(t,e,o){const i=o(1),n=o(0),a=o(77),r=(o(36),o(2));var s,c,l={getInstance:function(){return s||(c=null,s={getCpd:function(){return new Promise((function(t,e){if(c)return t(c);i.get(n.GET_CPD).then((function(e){if(e.data)return c=a.buildElement(e.data),t(c);r.error("No se encontró ningún CPD en la base de datos.")})).catch((function(t){return console.error(t),e(t)}))}))}}),s}};t.exports=l},function(t,e,o){const i=o(8),n=o(36);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.company.logo,t.latitude,t.longitude,t.maps)},t.exports=a},function(t,e,o){const i=o(14),n=o(4);var a=Object.create(i);a.createLayer=function(t){return t.latitude&&t.longitude&&t.icon?L.marker([t.latitude,t.longitude],{icon:L.icon({iconUrl:n.IMAGE_UPLOADS+t.icon,iconSize:[50,50]}),contextmenu:!0,contextmenuInheritItems:!1,title:"CPD"}):L.marker([0,0],{title:" "})},t.exports=a},function(t,e,o){const i=o(1),n=o(32),a=o(26),r=o(29),s=o(30),c=o(20),l=o(33),d=o(0);var u=function(){var t;this.layers=[];var e=this;function o(){return{getLayers:function(t){return new Promise((function(o,u){i.get(d.GET_LAYERS).then((function(i){return function(t,o){t.forEach((function(t){var i=n.buildElement(t,o);t.distributionBoxes.forEach((function(t){var e=a.buildElement(t,o);i.addDistributionBox(e),t.subscriberBoxes.forEach((function(t){subBox=r.buildElement(t,o),t.subscriberBoxExts.forEach((function(t){var e=s.buildElement(t,o);i.addSubscriberBoxExt(e),subBox.addSubscriberBoxExt(e)})),i.addSubscriberBox(subBox),e.addSubscriberbox(subBox)}))})),t.wires.forEach((function(t){i.addWire(c.buildElement(t,o))})),t.torpedos.forEach((function(t){i.addTorpedo(l.buildElement(t,o))})),e.layers.push(i)}))}(i.data,t),o(e.layers)})).catch((function(t){return console.error(t),u(t)}))}))}}}return{getInstance:function(){return t||(t=o()),t}}}();t.exports=u},function(t,e,o){const i=o(1),n=o(0),a=o(35),r=o(81);var s,c={getInstance:function(){return s||(s={getNotes:function(){return new Promise((function(t,e){i.get(n.GET_NOTES).then((function(e){var o=e.data,i=[];return o.forEach((function(t){i.push(a.buildElement(t))})),t(i)})).catch((function(t){return console.error(t),e(t)}))}))},getAlerts:function(){return new Promise((function(t,e){i.get(n.GET_ALERTS).then((function(e){var o=e.data,i=[];return o.forEach((function(t){i.push(r.buildElement(t))})),t(i)})).catch((function(t){return console.error(t),e(t)}))}))}}),s}};t.exports=c},function(t,e,o){const i=o(8),n=o(82);var a=Object.create(i);a.buildElement=function(t,e){return new n(e,t.id,t.title,t.latitude,t.longitude,t.icon)},t.exports=a},function(t,e,o){const i=o(6),n=o(1),a=(o(4),o(0)),r=o(12),s=o(9),c=(o(10),o(2));var l=function(t,e,o,n,a,s){i.call(this,t),this.id=e,this.title="Alerta: "+o,this.latitude=n,this.longitude=a,this.icon=s,this.marker=r.createLayer(this,[21,20])};l.prototype=Object.create(i.prototype),l.prototype={getLayer:function(){return this.marker.bindPopup("",{maxWidth:"none"}),this.subscribeToEvents(),this.marker},edit:function(){this.marker.toggleEdit();var t=this.marker;this.marker.editEnabled()?t.editing.enable():(t.editing.disable(),this.latitude=t.getLatLng().lat,this.longitude=t.getLatLng().lng,n.post(a.PUT_ALERT,{id:this.id,latitude:this.latitude,longitude:this.longitude}).then((function(t){c.success(t.data.message)})))},generatePopUp:function(){var t=this;return new Promise((function(e,o){n.get(a.GET_ALERT_ID+t.id).then((function(t){var o=t.data,i=s.getInstance().addContentDescription({id:"description",label:"Descripción"},{"Título":o.title,"Descripción":o.description},!0).addContentImage({id:"image",label:"Imagen"},o.image,!1).build(550,240);e(i)})).catch((function(t){console.error(t),c.error(t.response.data.message)}))}))},subscribeToEvents:function(){var t=this;this.marker.bindContextMenu({contextmenuItems:[{text:"<strong>"+t.title+"</strong>",disabled:!0},"-",{text:'<i class="fas fa-arrows-alt"></i> Mover | Fijar',callback:function(){t.edit()}},"-",{disabled:!0,text:'<i class="far fa-edit"></i> Editar',callback:function(){c.error("No habilitado")}}]}),this.marker.on("click",(function(e){t.generatePopUp().then((function(e){t.marker.bindPopup(e)}))}))}},t.exports=l},function(t,e,o){const i=o(1),n=o(0),a=o(3),r=o(84),s=o(25),c=o(85),l=o(87),d=o(7),u=o(88),f=o(5);function p(t){this.mapController=t,this.eventType=L.Draw.Event.CREATED}p.prototype=new u,p.prototype.constructor=p,p.prototype.listen=function(t){var e=t.layer;if(e instanceof L.Polygon&&i.get(n.GET_FORM_LAYER).then((function(t){for(var o=t.data,i=[],n=e.getLatLngs(),s=0;s<n[0].length;s++)i.push([n[0][s].lat,n[0][s].lng]);a.showModal("Nuevo delimitador",(new r).addLayerList(o).addCoordinates(i).addSubmitBtn().build()),$("select").select2({width:"100%"})})),e instanceof L.Polyline&&!(e instanceof L.Polygon)){for(var o=0,u=[],p=e.getLatLngs(),h=0;h<p.length;h++)h>0&&(o+=p[h].distanceTo(p[h-1])),u.push([p[h].lat,p[h].lng]);i.get(n.GET_FORM_WIRE_PATTERN).then((function(t){a.showModal("Nuevo cable",(new s).addName().addLayers(t.data.layers).addWirePatterns(t.data.wirePatterns).addCoordinates(u).addDistance(o).addSubmitBtn().build()),$("select").select2({width:"100%"})}))}if(e instanceof L.Marker){var m=e.getLatLng().lat,b=e.getLatLng().lng;a.showModal("Nuevo elemento",(new f).addTypes().build(),{ok:{label:"Siguiente",className:"btn-info",callback:function(){var t=document.getElementById(d.ELEMENT_TYPE).value;c.createBuilder(t,m,b).then((function(e){a.showModal(l.createTitle(t),e.build()),$("select").select2({width:"100%"})}))}}}),$("select").select2({width:"100%"})}},t.exports=p},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this),this.form="<form id='layer-form' action='"+n.POST_LAYER+"' method='POST'>"};(a.prototype=Object.create(i.prototype)).addLayerList=function(t){var e=this;return this.form+="<div class='input-group mb-3'>            <select class='custom-select' id='layer' name='layer'>",t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>        </div>",this},a.prototype.addCoordinates=function(t){return this.form+="<input type='hidden' name='coordinates' value='"+JSON.stringify(t)+"'>",this},t.exports=a},function(t,e,o){const i=o(18),n=o(1),a=o(0),r=o(86),s=o(28),c=o(31),l=o(34);var d={createBuilder:function(t,e,o){switch(t){case i.SUBSCRIBER_BOX:return new Promise((function(t,i){n.get(a.GET_SUBSCRIBER).then((function(i){t((new r).addSubscriberBoxList(i.data).addLatitude(e).addLongitude(o).addSubmitBtn())}))}));case i.DISTRIBUTION_BOX:return new Promise((function(t,i){n.get(a.GET_FORM_LAYER).then((function(i){var r=i.data;n.get(a.GET_DISTRIBUTION).then((function(i){t((new s).addLayers(r).addDistributionBoxList(i.data).addLatitude(e).addLongitude(o).addSubmitBtn())}))}))}));case i.SUBSCRIBER_BOX_EXT:return new Promise((function(t,i){n.get(a.GET_SUBSCRIBER_EXT).then((function(i){t((new c).addSubscriberBoxExtList(i.data).addLatitude(e).addLongitude(o).addSubmitBtn())}))}));case i.TORPEDO:return new Promise((function(t,i){n.get(a.GET_FORM_LAYER).then((function(i){t((new l).addName().addLayers(i.data).addLatitude(e).addLongitude(o).addSubmitBtn())}))}))}}};t.exports=d},function(t,e,o){const i=o(5),n=o(0);var a=function(){i.call(this),this.form="<form id='subscriber-box-form' action='"+n.POST_SUBSCRIBER+"' method='POST' enctype='multipart/form-data'>"};(a.prototype=Object.create(i.prototype)).addSubscriberBoxList=function(t){var e=this;return this.form+="<div class='input-group mb-3'>            <select class='custom-select' id='ds' name='subscriber-box'>",t.forEach((function(t){e.form+="<option value='"+t.id+"'>"+t.name+"</option>"})),this.form+="</select>        </div>",this},a.prototype.addEditForm=function(t){return this.form="<iframe src='"+n.GET_SUBSCRIBER_ID+t+"/form' style='width:100%;height:500px;'></iframe>",this},t.exports=a},function(t,e,o){const i=o(18);var n={createTitle:function(t){switch(t){case i.SUBSCRIBER_BOX:return"Caja de abonado";case i.DISTRIBUTION_BOX:return"Caja de distribución";case i.SUBSCRIBER_BOX_EXT:return"Caja de extensión";case i.TORPEDO:return"Torpedo"}}};t.exports=n},function(t,e){var o=function(t){this.mapController=t,this.eventType};o.prototype={getEventType:function(){return this.eventType},listen:function(t){}},t.exports=o}]);